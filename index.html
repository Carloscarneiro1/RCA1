<!DOCTYPE html> 
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RELATÓRIO DE ATENDIMENTO À CLIENTES (RAC)</title>

<style>
* { box-sizing: border-box; }
body {
  font-family: Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  background: #f3f4f6;
  color: #1f2933;
}

/* CABEÇALHO */
header {
  width: 100%;
  background: #f97316;
  color: #ffffff;
  padding: 18px 0;
  text-align: center;
  font-size: 20px;
  font-weight: bold;
}

/* ÁREA */
.area-strip { background: #f97316; padding: 0 16px; }
.area-title {
  background: #f97316;
  color: #ffffff;
  padding: 12px 24px;
  font-size: 16px;
  border-bottom-right-radius: 22px;
  display: inline-block;
  font-weight: bold;
}

/* CONTAINER DAS SEÇÕES */
.section-container {
  max-width: 960px;
  margin: 0 auto 24px;
  background: #ffffff;
  padding: 24px 32px 32px;
  border-radius: 0 0 12px 12px;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  border-top: 1px solid #e5e7eb;
}

.section-header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #1f2933;
}
.title-underline {
  width: 80px;
  height: 3px;
  border-radius: 999px;
  background: #f97316;
  margin-top: 6px;
}

/* CAMPOS */
.field { margin-bottom: 22px; }
.field-title { font-size: 14px; margin-bottom: 4px; color: #374151; }
.required { color: red; font-weight: bold; margin-left: 4px; }

.md-input {
  position: relative;
  display: flex;
  align-items: center;
  background: #f5f5f5;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  padding: 10px 12px;
}
.md-input input,
.md-input textarea,
.md-input select {
  width: 100%;
  border: none;
  background: transparent;
  outline: none;
  font-size: 14px;
}

/* TEXTAREA */
.md-textarea textarea { resize: vertical; min-height: 80px; }

/* PREVIEW IMAGENS */
.preview-container {
  margin-top: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}
.preview-item {
  position: relative;
  width: 90px;
  height: 90px;
}
.preview-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 6px;
  border: 2px solid #f97316;
}
.delete-btn {
  position: absolute;
  top: -6px;
  right: -6px;
  background: #e53935;
  padding: 3px 6px;
  border-radius: 50%;
  font-size: 11px;
  cursor: pointer;
  color: #fff;
}

/* BOTÕES */
.buttons {
  text-align: center;
  margin: 30px 0;
}
.btn {
  background: #f97316;
  color: #fff;
  padding: 12px 26px;
  font-size: 16px;
  border-radius: 8px;
  cursor: pointer;
  border: none;
  margin: 6px;
}
.btn:hover { background: #d85f10; }
</style>
</head>

<body>
<header>RELATÓRIO DE ATENDIMENTO À CLIENTES (RAC)</header>

<!-- ÁREA 1 -->
<div class="area-strip"><div class="area-title">Área 1</div></div>
<div class="section-container">
<div class="section-header">
  <h2>Dados gerais</h2>
  <div class="title-underline"></div>
</div>

<div class="field">
  <div class="field-title">Data da visita<span class="required">*</span></div>
  <div class="md-input"><input type="date" id="dataVisita"></div>
</div>

<div class="field">
  <div class="field-title">Nome do analista<span class="required">*</span></div>
  <div class="md-input">
    <input id="analista" list="listaAnalistas" placeholder="Digite para pesquisar">
    <datalist id="listaAnalistas">
      <option value="Leandro Nogueira"></option>
      <option value="Mayara Rodrigues"></option>
      <option value="Celso Penteado"></option>
      <option value="Carlos Carneiro"></option>
    </datalist>
  </div>
</div>

<div class="field">
  <div class="field-title">Cliente</div>
  <div class="md-input"><input type="text" id="cliente"></div>
</div>

<div class="field">
  <div class="field-title">Cidade / Estado</div>
  <div class="md-input"><input type="text" id="cidadeEstado"></div>
</div>
</div>

<!-- ÁREA 2 -->
<div class="area-strip"><div class="area-title">Área 2</div></div>
<div class="section-container">
<div class="section-header">
  <h2>Dados da reclamação</h2>
  <div class="title-underline"></div>
</div>

<div class="field">
  <div class="field-title">Número(s) RO</div>
  <div class="md-input"><input id="numeroRo"></div>
</div>

<div class="field">
  <div class="field-title">Quantidade reclamada (m²)</div>
  <div class="md-input"><input type="number" step="0.01" id="qtdReclamada"></div>
</div>

<div class="field">
  <div class="field-title">Defeito reclamado<span class="required">*</span></div>
  <div class="md-input">
    <select id="defeito">
      <option hidden disabled selected>Selecione</option>
      <option>DEFEITOS PONTUAIS</option>
      <option>DIFICULDADE DE CORTE</option>
      <option>FALTA DE CHAPAS</option>
      <option>MANCHAS/IRISAÇÃO</option>
      <option>RISCO</option>
      <option>VIDRO MOLHADO</option>
    </select>
  </div>
</div>

<div id="perguntas"></div>

<!-- Anexar evidências -->
<div class="field">
<div class="field-title">Evidências</div>
<input type="file" id="fotos" multiple accept="image/*">
<div class="preview-container" id="preview"></div>
</div>
</div>

<!-- ÁREA 3 -->
<div class="area-strip"><div class="area-title">Área 3</div></div>
<div class="section-container">
<div class="section-header">
  <h2>Análise técnica</h2>
  <div class="title-underline"></div>
</div>

<div class="field">
  <div class="field-title">Comentários gerais referente ao atendimento</div>
  <div class="md-input md-textarea"><textarea id="comentarios"></textarea></div>
</div>

<div class="field">
<div class="field-title">Anexos da Análise Técnica</div>
<input type="file" id="fotosAnalise" multiple accept="image/*">
<div class="preview-container" id="previewAnalise"></div>
</div>
</div>

<div class="buttons">
<button class="btn" onclick="gerarPDF()">Exportar PDF</button>
<button class="btn">Registrar</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
// PERGUNTAS DINÂMICAS
const perguntasDefeitos = {
"DEFEITOS PONTUAIS": [
"FOI ENCONTRADO ANTES OU DEPOIS DO PROCESSAMENTO?",
"HOUVE APROVEITAMENTO DA CHAPA?",
"O DEFEITO É VISTO EM TODAS AS CHAPAS?",
"QUAL A QUANTIDADE DE DEFEITOS?",
"QUAL FOI A PERCA REAL?",
"TEM AMOSTRAS SEGREGADAS PARA ENVIO?"
],
"DIFICULDADE DE CORTE": [
"A APLICAÇÃO DO OLEO DE CORTE ESTA NORMAL?",
"A PRESSÃO DA FERRAMENTA FOI AJUSTADA?",
"HÁ PRESENÇA DE PROBLEMAS NO DESTAQUE?",
"MESA DE CORTE ESTÁ EM BOAS CONDIÇÕES?",
"O MATERIAL ESTA SEGREGADO?",
"QUAL A PRESSÃO UTILIZADA?",
"QUAL FOI A PERDA REAL?",
"QUAL O ÂNGULO DO RODIZIO?",
"QUANTO TEMPO É FEITO A TROCA DOS RODIZIOS?",
"TODAS AS CHAPAS ESTÃO QUEBRANDO DURANTE O CORTE?"
],
"FALTA DE CHAPAS": [
"A FALTA FOI VISTA NO DESCARREGAMENTO?",
"POSSUI O RIE? ENVIAR CÓPIA",
"QUANTAS CHAPAS FALTAM?"
],
"MANCHAS/IRISAÇÃO": [
"HÁ INDÍCIOS DE ÁGUA NAS PILHAS?",
"HOUVE BENEFICIAMENTO DOS LOTES?",
"O MATERIAL ESTA SEGREGADO?",
"QUAL FOI A PERDA REAL?",
"TODAS AS CHAPAS COM MANCHAS?"
],
"RISCO": [
"É POSSÍVEL SENTIR O RISCO AO TOCAR?",
"ESTÁ DO LADO BANHO OU ATMOSFERA?",
"O RISCO É CONTÍNUO OU INTERMITENTE?",
"NO VIDRO BASE OU PRODUTO ACABADO?",
"PODE ENVIAR CROQUI?",
"QUAL O SENTIDO DO RISCO?"
],
"VIDRO MOLHADO": [
"AVARIA NA LONA DO CAMINHÃO?",
"SERÁ PROCESSADO RÁPIDO?",
"SE SIM, HOUVE PERDA?",
"TODAS AS CHAPAS MOLHADAS?"
]
};

document.getElementById("defeito").addEventListener("change", () => {
const defeito = document.getElementById("defeito").value;
const container = document.getElementById("perguntas");
container.innerHTML = "";
perguntasDefeitos[defeito]?.forEach(perg => {
  container.innerHTML += `
    <div class='field'>
      <div class='field-title'>${perg}</div>
      <div class='md-input md-textarea'>
        <textarea rows='2'></textarea>
      </div>
    </div>
  `;
});
});

// PRÉ-VISUALIZAÇÃO + EXCLUSÃO
function setupPreview(inputId, previewId) {
const input = document.getElementById(inputId);
const preview = document.getElementById(previewId);
let imagens = [];

function renderPreview() {
preview.innerHTML = "";
imagens.forEach((file, index) => {
  const reader = new FileReader();
  reader.onload = e => {
    const div = document.createElement("div");
    div.className = "preview-item";

    const img = document.createElement("img");
    img.src = e.target.result;

    const del = document.createElement("div");
    del.className = "delete-btn";
    del.innerText = "×";
    del.onclick = () => {
      imagens.splice(index, 1);
      renderPreview();
    };

    div.appendChild(img);
    div.appendChild(del);
    preview.appendChild(div);
  };
  reader.readAsDataURL(file);
});
}

input.addEventListener("change", () => {
Array.from(input.files).forEach(file => {
  if (file.type.startsWith("image/") && imagens.length < 10) {
    imagens.push(file);
  }
});
renderPreview();
});
}

setupPreview("fotos", "preview");
setupPreview("fotosAnalise", "previewAnalise");

// EXPORTAR PDF
async function gerarPDF() {
const { jsPDF } = window.jspdf;
const doc = new jsPDF({ unit: "mm", format: "a4" });

doc.setFontSize(18);
doc.text("RELATÓRIO DE ATENDIMENTO", 15, 15);
doc.save("RAC.pdf");
}
</script>

</body>
</html>
